<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="pt" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Tutorial: Rails7, Tailwind e Hotwire - Parte 3 - CallMarx</title>
<meta name="description" content="Na parte anterior deste tutorial eu expliquei como utilizar a renderização parcial de html com turbo_stream do Hotwire Turbo, o que nos permitiu mostrar os cards recém inseridos ou excluídos do nosso humilde protótipo de Kanban. Agora vou abordar sobre o pacote Hotwire Stimulus.">


  <meta name="author" content="Eugenio Augusto Jimenes">
  
  <meta property="article:author" content="Eugenio Augusto Jimenes">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="pt_BR">
<meta property="og:site_name" content="CallMarx">
<meta property="og:title" content="Tutorial: Rails7, Tailwind e Hotwire - Parte 3">
<meta property="og:url" content="https://callmarx.github.io/blog/2022/06/29/tutorial-rails7-hotwire-parte-3.html">


  <meta property="og:description" content="Na parte anterior deste tutorial eu expliquei como utilizar a renderização parcial de html com turbo_stream do Hotwire Turbo, o que nos permitiu mostrar os cards recém inseridos ou excluídos do nosso humilde protótipo de Kanban. Agora vou abordar sobre o pacote Hotwire Stimulus.">



  <meta property="og:image" content="https://callmarx.github.io/assets/posts/stimulus-logo.webp">



  <meta name="twitter:site" content="@leminski_se">
  <meta name="twitter:title" content="Tutorial: Rails7, Tailwind e Hotwire - Parte 3">
  <meta name="twitter:description" content="Na parte anterior deste tutorial eu expliquei como utilizar a renderização parcial de html com turbo_stream do Hotwire Turbo, o que nos permitiu mostrar os cards recém inseridos ou excluídos do nosso humilde protótipo de Kanban. Agora vou abordar sobre o pacote Hotwire Stimulus.">
  <meta name="twitter:url" content="https://callmarx.github.io/blog/2022/06/29/tutorial-rails7-hotwire-parte-3.html">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://callmarx.github.io/assets/posts/stimulus-logo.webp">
  

  



  <meta property="article:published_time" content="2022-06-29T21:34:03-03:00">






<link rel="canonical" href="https://callmarx.github.io/blog/2022/06/29/tutorial-rails7-hotwire-parte-3.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://callmarx.github.io/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="CallMarx Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          CallMarx
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/tags/">Posts por tags</a>
            </li><li class="masthead__menu-item">
              <a href="/about/">Sobre mim</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Buscar</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/eu-e-nila.webp" alt="Eugenio Augusto Jimenes" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Eugenio Augusto Jimenes</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Nerd, disléxico, viciado-hipster em café, desenvolvedor, linux fanboy e esquerdopata convicto - CallMarx, sacou?</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Contatos</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">São Paulo - SP</span>
        </li>
      

      
        
          
            <li><a href="mailto:eugeniojimenes@gmail" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://github.com/callmarx" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://twitter.com/leminski_se" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/eugenio-augusto-jimenes/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Tutorial: Rails7, Tailwind e Hotwire - Parte 3">
    <meta itemprop="description" content="Na parte anteriordeste tutorial eu expliquei como utilizar a renderização parcial de html com turbo_stream doHotwire Turbo, o que nos permitiu mostrar os cardsrecém inseridos ou excluídos do nosso humilde protótipo de Kanban. Agora vou abordar sobreo pacote Hotwire Stimulus.">
    <meta itemprop="datePublished" content="2022-06-29T21:34:03-03:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Tutorial: Rails7, Tailwind e Hotwire - Parte 3
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-06-29T21:34:03-03:00">2022-06-29</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          31 minuto(s) de leitura
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><img src="/assets/posts/stimulus-logo.webp" alt="Hotwire Stimulus Logo" class="align-center" /></p>

<p>Na <a href="/blog/2021/12/19/tutorial-rails7-hotwire-parte-2.html" target="_blank">parte anterior</a>
deste tutorial eu expliquei como utilizar a renderização parcial de html com <code class="language-plaintext highlighter-rouge">turbo_stream</code> do
<a href="https://turbo.hotwired.dev" target="_blank">Hotwire Turbo</a>, o que nos permitiu mostrar os cards
recém inseridos ou excluídos do nosso humilde protótipo de Kanban. Agora vou abordar sobre
o pacote <a href="https://stimulus.hotwired.dev/" target="_blank">Hotwire Stimulus</a>.
<!-- excerpt-separator --></p>

<h2 id="objetivo-geral">Objetivo Geral</h2>
<p>A meta é desenvolver (e aprender) utilizando Rails 7, esbuild, Tailwind e Hotwire (Turbo e
Stimulus), mas meu foco será mais sobre o pacote Hotwire e como ele pode nos ajudar. Conforme
avanço nos estudos e na implementação, vou complementando este tutorial. Por enquanto temos:</p>
<ul>
  <li><a href="/blog/2021/12/07/tutorial-rails7-hotwire.html" target="_blank">Parte 0: Rails 7</a></li>
  <li><a href="/blog/2021/12/09/tutorial-rails7-hotwire-parte-1.html" target="_blank">Parte 1: Tailwind</a></li>
  <li><a href="/blog/2021/12/19/tutorial-rails7-hotwire-parte-2.html" target="_blank">Parte 2: Hotwire Turbo</a></li>
  <li><a href="#etapa-3---hotwire-stimulus">Parte 3: Hotwire Stimulus</a> → página atual</li>
</ul>

<p>O pano de fundo é uma aplicação estilo Kanban, com um quadro em que podemos incluir, ver, editar e
excluir os cards/tarefas e isso ser persistido simultaneamente via <em>websockets</em> para todas as
sessões abertas da aplicação. Todo código está disponível neste
<a href="https://github.com/callmarx/LearningHotwire" target="_blank">repositório</a>. Note que incluí
algumas <a href="https://github.com/callmarx/LearningHotwire/branches/all" target="_blank"><em>branches</em></a> que
representam as partes abordadas aqui.</p>

<h2 id="etapa-3---hotwire-stimulus">Etapa 3 - Hotwire Stimulus</h2>
<p>Nesta etapa final, implementei um <em>modal</em> (o famoso pop-up que não é exatamente um pop-up) do qual
será controlado por JS através do Hotwire Stimulus. Dividi essa etapa em 3 <em>branches</em>:</p>
<ul>
  <li><a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.1" target="_blank">blog-part-3.1</a> -
Em que uso a Turbo Frame e o Stimulus para renderizar um html dinamicamente e depois remove-lo;</li>
  <li><a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2" target="_blank">blog-part-3.2</a> -
Em que uso um pouco mais de Tailwind para fazer o <em>modal</em> e o Stimulus para lidar com outras ações necessárias;</li>
  <li><a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.3" target="_blank">blog-part-3.4</a> -
Subparte bônus, em que uso a gema <a href="https://viewcomponent.org/" target="_blank">ViewComponent</a>
para agrupar melhor o código do <em>modal</em>.</li>
</ul>

<h3 id="foi-só-falar-que-eu-não-ia-usar-turbo-frame-que">Foi só falar que eu não ia usar Turbo Frame que…</h3>
<p>Na etapa anterior, na parte que faço uma breve explicação sobre a diferença entre
<a href="/blog/2021/12/19/tutorial-rails7-hotwire-parte-2.html#turbo-frame-vs-turbo-stream" target="_blank">turbo-frame e turbo-stream</a>,
coloquei uma observação dizendo que não pretendia utilizar o Turbo Frame e eis que surge a
oportunidade: com ele podemos renderizar dinamicamente o formulário do <em>chore</em> para o usuário,
quando ele precisar inserir ou editar.</p>

<p>Primeiro, inclui a linha <code class="language-plaintext highlighter-rouge">&lt;%= turbo_frame_tag "modal" %&gt;</code> no arquivo
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.1/app/views/layouts/application.html.erb" target="_blank">app/views/layouts/application.html.erb</a>,
resultando no seguinte:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file app/views/layouts/application.html.erb of blog-part-3.1 branch --&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>LearningHotwire<span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csp_meta_tag</span> <span class="cp">%&gt;</span>

    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="s2">"data-turbo-track"</span><span class="p">:</span> <span class="s2">"reload"</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="s2">"data-turbo-track"</span><span class="p">:</span> <span class="s2">"reload"</span><span class="p">,</span> <span class="ss">defer: </span><span class="kp">true</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  <span class="nt">&lt;body&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"modal"</span> <span class="cp">%&gt;</span> <span class="c">&lt;!-- add this --&gt;</span>
    <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>Depois envolvi o conteúdo de
<a href="https://github.com/callmarx/LearningHotwire/blob/46e4871993ac592a990d7d0e3a4e7c29d0e69626/app/views/chores/new.html.erb" target="_blank">app/views/chores/new.html.erb</a>,
pelo <em>block</em> de <code class="language-plaintext highlighter-rouge">&lt;%= turbo_frame_tag "modal" do %&gt;...&lt;% end %&gt;</code>, mas que no caso ficou apenas para
dar o <em>render</em> do <em>partial form</em>, ou seja:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file app/views/chores/new.html.erb of blog-part-3.1 branch --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"modal"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"form"</span><span class="p">,</span> <span class="ss">chore: </span><span class="vi">@chore</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>E então, alterei o link de inserir um novo <em>chore</em> adicionando a opção
<code class="language-plaintext highlighter-rouge">data: { turbo_frame: 'modal' }</code> em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.1/app/views/chores/index.html.erb" target="_blank">app/views/chores/index.html.erb</a>,
também incluí um ícone para o botão e removi o <code class="language-plaintext highlighter-rouge">render</code> do <code class="language-plaintext highlighter-rouge">form</code> que tinha no final:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file app/views/chores/index.html.erb of blog-part-3.1 branch --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">turbo_stream_from</span> <span class="s2">"chores"</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"z-0 flex flex-col h-screen bg-slate-300"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex justify-end py-2"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">new_chore_path</span><span class="p">,</span>
      <span class="ss">data: </span><span class="p">{</span> <span class="ss">turbo_frame: </span><span class="s1">'modal'</span> <span class="p">},</span> <span class="c1"># required for turbo frame</span>
      <span class="k">class</span><span class="ss">:"flex m-1 mr-12 p-2 w-fit h-fit text-white bg-slate-600 hover:bg-slate-900 rounded-md"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;svg</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/2000/svg"</span> <span class="na">width=</span><span class="s">"24"</span> <span class="na">height=</span><span class="s">"24"</span> <span class="na">fill=</span><span class="s">"currentColor"</span> <span class="na">viewBox=</span><span class="s">"0 0 16 16"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;path</span> <span class="na">d=</span><span class="s">"M8 0c-.176 0-.35.006-.523.017l.064.998a7.117 7.117 0 0 1 .918 0l.064-.998A8.113 8.113 0 0 0 8 0zM6.44.152c-.346.069-.684.16-1.012.27l.321.948c.287-.098.582-.177.884-.237L6.44.153zm4.132.271a7.946 7.946 0 0 0-1.011-.27l-.194.98c.302.06.597.14.884.237l.321-.947zm1.873.925a8 8 0 0 0-.906-.524l-.443.896c.275.136.54.29.793.459l.556-.831zM4.46.824c-.314.155-.616.33-.905.524l.556.83a7.07 7.07 0 0 1 .793-.458L4.46.824zM2.725 1.985c-.262.23-.51.478-.74.74l.752.66c.202-.23.418-.446.648-.648l-.66-.752zm11.29.74a8.058 8.058 0 0 0-.74-.74l-.66.752c.23.202.447.418.648.648l.752-.66zm1.161 1.735a7.98 7.98 0 0 0-.524-.905l-.83.556c.169.253.322.518.458.793l.896-.443zM1.348 3.555c-.194.289-.37.591-.524.906l.896.443c.136-.275.29-.54.459-.793l-.831-.556zM.423 5.428a7.945 7.945 0 0 0-.27 1.011l.98.194c.06-.302.14-.597.237-.884l-.947-.321zM15.848 6.44a7.943 7.943 0 0 0-.27-1.012l-.948.321c.098.287.177.582.237.884l.98-.194zM.017 7.477a8.113 8.113 0 0 0 0 1.046l.998-.064a7.117 7.117 0 0 1 0-.918l-.998-.064zM16 8a8.1 8.1 0 0 0-.017-.523l-.998.064a7.11 7.11 0 0 1 0 .918l.998.064A8.1 8.1 0 0 0 16 8zM.152 9.56c.069.346.16.684.27 1.012l.948-.321a6.944 6.944 0 0 1-.237-.884l-.98.194zm15.425 1.012c.112-.328.202-.666.27-1.011l-.98-.194c-.06.302-.14.597-.237.884l.947.321zM.824 11.54a8 8 0 0 0 .524.905l.83-.556a6.999 6.999 0 0 1-.458-.793l-.896.443zm13.828.905c.194-.289.37-.591.524-.906l-.896-.443c-.136.275-.29.54-.459.793l.831.556zm-12.667.83c.23.262.478.51.74.74l.66-.752a7.047 7.047 0 0 1-.648-.648l-.752.66zm11.29.74c.262-.23.51-.478.74-.74l-.752-.66c-.201.23-.418.447-.648.648l.66.752zm-1.735 1.161c.314-.155.616-.33.905-.524l-.556-.83a7.07 7.07 0 0 1-.793.458l.443.896zm-7.985-.524c.289.194.591.37.906.524l.443-.896a6.998 6.998 0 0 1-.793-.459l-.556.831zm1.873.925c.328.112.666.202 1.011.27l.194-.98a6.953 6.953 0 0 1-.884-.237l-.321.947zm4.132.271a7.944 7.944 0 0 0 1.012-.27l-.321-.948a6.954 6.954 0 0 1-.884.237l.194.98zm-2.083.135a8.1 8.1 0 0 0 1.046 0l-.064-.998a7.11 7.11 0 0 1-.918 0l-.064.998zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/svg&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"ml-2 font-semibold"</span><span class="nt">&gt;</span>New Chore<span class="nt">&lt;/span&gt;</span>
    <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"z-0 w-4/5 mx-auto overflow-hidden h-4/5 bg-slate-200 rounded-md transition transform duration-600 ease-in-out hover:bg-slate-400 hover:overflow-visible"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"chores"</span> <span class="na">class=</span><span class="s">"z-0 px-5 pt-1 pb-3 grid grid-cols-3 gap-2"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%</span> <span class="vi">@chores</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">chore</span><span class="o">|</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"chore"</span><span class="p">,</span> <span class="n">chore</span><span class="ss">:chore</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span> <span class="c">&lt;!-- remove 'render "form"' --&gt;</span>
</code></pre></div></div>
<p>com isso, quando você clicar no butão <em>New Chore</em>, será incluído
<code class="language-plaintext highlighter-rouge">src="http://localhost:3000/chores/new"</code> na área reservado com <code class="language-plaintext highlighter-rouge">&lt;%= turbo_frame_tag "modal" %&gt;</code> que
agora está no arquivo
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.1/app/views/layouts/application.html.erb" target="_blank">app/views/layouts/application.html.erb</a>
e com isso
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.1/app/views/chores/new.html.erb" target="_blank">app/views/chores/new.html.erb</a>
será renderizado dinamicamente dentro desta tag.
<img src="/assets/posts/gifs/triggering-turbo-frame.gif" alt="Triggering Turbo Frame" class="align-center" /></p>

<p>Note que uma vez clicado em “New Chore”, não é possível remover o formulário, seja com um botão de
fechar ou mesmo após a inserção de um novo card. Para isso utilizaremos o Stimulus como mostrarei
nos próximos passos.</p>

<p class="notice--info"><strong>OBS</strong>: Eu coloquei <code class="language-plaintext highlighter-rouge">&lt;%= turbo_frame_tag "modal" %&gt;</code> em “app/views/layouts/application.html.erb”
porque eu espero poder renderizar o <em>modal</em> de inserção em qualquer página da minha aplicação. Como
se trata de Kanban, o usuário provavelmente gostaria de inserir um novo card em qualquer página,
mas isso poderia ser feito, por exemplo, apenas quando estamos vendo todos os cards, ou seja, em
“app/views/chores/index.html.erb”.</p>

<h3 id="primeiros-passados-com-stimulus">Primeiros passados com Stimulus</h3>
<p>Primeiro gerei um “novo stimulus” no projeto, com seguinte comando e saída:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails generate stimulus chore-modal
       create  app/javascript/controllers/chore_modal_controller.js
       rails  stimulus:manifest:update
</code></pre></div></div>

<p>Como observado antes, não estamos “removendo” o html inserido dinamicamente pelo turbo-frame,
então vamos fazer isso como nosso primeiro método de <code class="language-plaintext highlighter-rouge">ChoreModalController</code>, em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.1/app/javascript/controllers/chore_modal_controller.js" target="_blank">app/javascript/controllers/chore_modal_controller.js</a>:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// file app/javascript/controllers/chore_modal_controller.js of blog-part-3.1 branch</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Controller</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@hotwired/stimulus</span><span class="dl">"</span>

<span class="c1">// Connects to data-controller="chore-modal"</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="kd">extends</span> <span class="nx">Controller</span> <span class="p">{</span>
  <span class="nx">connect</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hi! we are in ChoreModalController from Stimulus</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="c1">// action: "chore-modal#hideModal"</span>
  <span class="nx">hideModal</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">src</span><span class="dl">"</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">You've just called ChoreModalController#hideModal</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Para fechar o formulário de inserção, eu simplesmente removo o atributo <code class="language-plaintext highlighter-rouge">src</code> do elemento pai, que
no caso precisará ser o da tag <code class="language-plaintext highlighter-rouge">&lt;turbo-frame ...&gt;&lt;/turbo-frame&gt;</code> e depois o próprio elemento em que
<code class="language-plaintext highlighter-rouge">ChoreModalController</code> for chamado, que no caso será na <em>view</em> de inserção. Note também que incluí
alguns <code class="language-plaintext highlighter-rouge">console.log()</code> para mostrar quando estamos passando por cada parte de
<code class="language-plaintext highlighter-rouge">ChoreModalController</code>.</p>

<p>Agora precisamos dizer em que parte do nosso html iremos chamá-lo, para isso basta envolver sob
alguma <code class="language-plaintext highlighter-rouge">div</code> com <code class="language-plaintext highlighter-rouge">data-controller="chore-modal"</code>. Também é necessário dizer onde estará a ação que
invocará <code class="language-plaintext highlighter-rouge">ChoreModalController#hideModal</code> e isso é feito com <code class="language-plaintext highlighter-rouge">data-action="chore-modal#hideModal"</code>.
Sendo assim,
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.1/app/views/chores/new.html.erb" target="_blank">app/views/chores/new.html.erb</a>
ficou:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file app/views/chores/new.html.erb of blog-part-3.1 branch --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"modal"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">div</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">controller: </span><span class="s2">"chore-modal"</span> <span class="p">}</span> <span class="k">do</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"form"</span><span class="p">,</span> <span class="ss">chore: </span><span class="vi">@chore</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">button_tag</span> <span class="s2">"Close"</span><span class="p">,</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">action: </span><span class="s2">"chore-modal#hideModal"</span> <span class="p">},</span> <span class="ss">type: </span><span class="s2">"button"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"fixed top-0 right-0 rounded-lg p-3 m-2 bg-red-700 text-white"</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>A ação onde apliquei <code class="language-plaintext highlighter-rouge">data-action="chore-modal#hideModal"</code> foi em um botão vermelho com “Close”.
No caso, o erb <code class="language-plaintext highlighter-rouge">&lt;%= button_tag ... %&gt;</code> irá resultar no seguinte html:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;button</span>
  <span class="na">name=</span><span class="s">"button"</span>
  <span class="na">type=</span><span class="s">"button"</span>
  <span class="na">data-action=</span><span class="s">"chore-modal#hideModal"</span>
  <span class="na">class=</span><span class="s">"fixed right-0 rounded-lg p-3 m-2 bg-red-700 text-white"</span><span class="nt">&gt;</span>Close<span class="nt">&lt;/button&gt;</span>
</code></pre></div></div>
<p>e como <code class="language-plaintext highlighter-rouge">&lt;%= tag.div data: { controller: "chore-modal" } do %&gt;</code> está dentro de
<code class="language-plaintext highlighter-rouge">&lt;%= turbo_frame_tag "modal" do %&gt;</code>, <code class="language-plaintext highlighter-rouge">ChoreModalController#hideModal</code> irá remover o atributo <code class="language-plaintext highlighter-rouge">src</code>
da tag <code class="language-plaintext highlighter-rouge">&lt;turbo-frame id="modal" ...&gt;&lt;/turbo-frame&gt;</code> e o conteúdo dentro dela.</p>

<p>O resultado esperado é o seguinte:
<img src="/assets/posts/gifs/removing-turbo-frame.gif" alt="Removing rendered Turbo Frame with Stimulus" class="align-center" /></p>

<p>E na aba “Console” podemos ver os <code class="language-plaintext highlighter-rouge">Console.log()</code> que coloquei:
<img src="/assets/posts/gifs/removing-turbo-frame-console.gif" alt="Removing rendered Turbo Frame with Stimulus - Console" class="align-center" /></p>

<p>Tudo o que foi feito até aqui é o que corresponde a <em>branch</em>
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.1">blog-part-3.1</a>.</p>

<h3 id="mas-e-o-modal">Mas e o modal?</h3>
<p>Bem, o formulário de inserção por enquanto é incluído no topo da página movendo todo resto para
baixo. Definitivamente não é um <em>modal</em> <del>e nada bonito ou agradável</del>. Para isso basta utilizarmos o
Tailwind.</p>

<p>Em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2/app/views/chores/new.html.erb" target="_blank">app/views/chores/new.html.erb</a>,
temos:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file app/views/chores/new.html.erb of blog-part-3.2 branch --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"modal"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">div</span> <span class="ss">data: </span><span class="p">{</span>
      <span class="ss">controller: </span><span class="s2">"chore-modal"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="c1"># add the following classes</span>
    <span class="ss">class: </span><span class="s2">"z-40 fixed flex justify-center inset-0 bg-gray-600 bg-opacity-50 h-screen w-screen"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex flex-col p-4 m-12 rounded-md w-2/3 h-2/3 bg-slate-200 rounded-md hover:bg-slate-400 transition duration-600 ease-linear"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex justify-between"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div&gt;&lt;/div&gt;</span>
        <span class="c">&lt;!-- replace button to a better one --&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">button_tag</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">action: </span><span class="s2">"chore-modal#hideModal"</span> <span class="p">},</span> <span class="ss">type: </span><span class="s2">"button"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"flex-none w-8 h-8 text-slate-600 hover:text-black transition-all duration-600 ease-in-out"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
          <span class="nt">&lt;svg</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/2000/svg"</span> <span class="na">width=</span><span class="s">"32"</span> <span class="na">height=</span><span class="s">"32"</span> <span class="na">fill=</span><span class="s">"currentColor"</span> <span class="na">viewBox=</span><span class="s">"0 0 16 16"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;path</span> <span class="na">d=</span><span class="s">"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;/svg&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"form"</span><span class="p">,</span> <span class="ss">chore: </span><span class="vi">@chore</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Com as classes <code class="language-plaintext highlighter-rouge">fixed</code> e <code class="language-plaintext highlighter-rouge">z-40</code>, o tailwind irá montar um CSS que sobrepõe o formulário em cima
do resto do conteúdo da página. Somado com <code class="language-plaintext highlighter-rouge">h-screen</code>, <code class="language-plaintext highlighter-rouge">w-screen</code>, <code class="language-plaintext highlighter-rouge">bg-gray-600</code> e <code class="language-plaintext highlighter-rouge">bg-opacity-50</code>,
significa que esse <em>modal</em> ocupará a tela toda, mas com background na cor cinza e transparente.
Também aproveitei para trocar o botão vermelho <del>gritante, que ficou horrível,</del> de “Close” por um
ícone “x” cinza escuro mais discreto no canto superior direito, ficando assim:
<img src="/assets/posts/tailwind-modal.webp" alt="tailwind modal" class="align-center" /></p>

<h3 id="mais-ações-com-stimulus">Mais ações com Stimulus</h3>
<p>Por enquanto o <em>modal</em> só é fechado ao clicar no ícone “x”, precisaríamos, no mínimo, fechar também
após a inserção bem sucedida de um <em>chore</em>. Felizmente, o pacote Hotwire Turbo emite uma série de
eventos que permitem rastrear o ciclo de navegação. A lista completa desses eventos pode ser
verificada <a href="https://turbo.hotwired.dev/reference/events" target="_blank">aqui</a>.</p>

<p>Para o nosso caso, temos o evento <code class="language-plaintext highlighter-rouge">turbo:submit-end</code> que é disparado logo depois que uma submissão
de formulário é feita, armazenando as propriedade de <code class="language-plaintext highlighter-rouge">FormSubmissionResult</code>, ou seja, o resultado
da submissão, em <code class="language-plaintext highlighter-rouge">event.detail</code>. Assim, em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2/app/javascript/controllers/chore_modal_controller.js" target="_blank">app/javascript/controllers/chore_modal_controller.js</a>,
temos:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// file app/javascript/controllers/chore_modal_controller.js of blog-part-3.2 branch</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Controller</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@hotwired/stimulus</span><span class="dl">"</span>

<span class="c1">// Connects to data-controller="chore-modal"</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="kd">extends</span> <span class="nx">Controller</span> <span class="p">{</span>
  <span class="c1">// action: "chore-modal#hideModal"</span>
  <span class="nx">hideModal</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">src</span><span class="dl">"</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="c1">// action: "turbo:submit-end-&gt;chore-modal#submitEnd"</span>
  <span class="nx">submitEnd</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// add this method</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">hideModal</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Perceba que verificamos se <code class="language-plaintext highlighter-rouge">e.detail</code> foi bem sucedido para então chamar o método <code class="language-plaintext highlighter-rouge">hideModal()</code>.
Vale ressaltar que o método nomeado <code class="language-plaintext highlighter-rouge">submitEnd()</code> <strong>não está relacionado</strong> ainda ao evento
<code class="language-plaintext highlighter-rouge">turbo:submit-end</code>. Isso deve ser feito no atributo <code class="language-plaintext highlighter-rouge">data-action</code> onde <code class="language-plaintext highlighter-rouge">ChoreModalController</code> é
chamado, ou seja, em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2/app/views/chores/new.html.erb" target="_blank">app/views/chores/new.html.erb</a>:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file app/views/chores/new.html.erb of blog-part-3.2 branch --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"modal"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">div</span> <span class="ss">data: </span><span class="p">{</span>
      <span class="ss">controller: </span><span class="s2">"chore-modal"</span><span class="p">,</span>
      <span class="ss">action: </span><span class="s2">"turbo:submit-end-&gt;chore-modal#submitEnd"</span> <span class="c1"># add this</span>
    <span class="p">},</span>
    <span class="ss">class: </span><span class="s2">"z-40 fixed flex justify-center inset-0 bg-gray-600 bg-opacity-50 h-screen w-screen"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex flex-col p-4 m-12 rounded-md w-2/3 h-2/3 bg-slate-200 rounded-md hover:bg-slate-400 transition duration-600 ease-linear"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex justify-between"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div&gt;&lt;/div&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">button_tag</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">action: </span><span class="s2">"chore-modal#hideModal"</span> <span class="p">},</span> <span class="ss">type: </span><span class="s2">"button"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"flex-none w-8 h-8 text-slate-600 hover:text-black transition-all duration-600 ease-in-out"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
          <span class="nt">&lt;svg</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/2000/svg"</span> <span class="na">width=</span><span class="s">"32"</span> <span class="na">height=</span><span class="s">"32"</span> <span class="na">fill=</span><span class="s">"currentColor"</span> <span class="na">viewBox=</span><span class="s">"0 0 16 16"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;path</span> <span class="na">d=</span><span class="s">"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;/svg&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"form"</span><span class="p">,</span> <span class="ss">chore: </span><span class="vi">@chore</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Quando incluo <code class="language-plaintext highlighter-rouge">&lt;div ... data-action="turbo:submit-end-&gt;chore-modal#submitEnd" ...&gt;</code>, agora sim,
estou dizendo para chamar <code class="language-plaintext highlighter-rouge">ChoreModalController#submitEnd()</code> quando o evento <code class="language-plaintext highlighter-rouge">turbo:submit-end</code> for
disparado. Para testar que inserção mal sucedida de um <em>chore</em> não feche o <em>modal</em>, inclui o seguinte
validador em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2/app/models/chore.rb" target="_blank">app/models/chore.rb</a>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># file app/models/chore.rb of blog-part-3.2 branch</span>

<span class="k">class</span> <span class="nc">Chore</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span> <span class="c1"># add this</span>
<span class="k">end</span>
</code></pre></div></div>

<p>O resultado ficou o seguinte:
<img src="/assets/posts/gifs/turbo--submit-end--event.gif" alt="Turbo submit-end event" class="align-center" /></p>

<p>Aproveitei outros eventos para implementar mais situações em que o usuário gostaria que o <em>modal</em>
feche, no caso ao pressionar a tecla ESC e ao clicar “fora” do <em>modal</em>, ou seja, no background cinza
transparente. Em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2/app/javascript/controllers/chore_modal_controller.js" target="_blank">app/javascript/controllers/chore_modal_controller.js</a>:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// file app/javascript/controllers/chore_modal_controller.js of blog-part-3.2 branch</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Controller</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@hotwired/stimulus</span><span class="dl">"</span>

<span class="c1">// Connects to data-controller="chore-modal"</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="kd">extends</span> <span class="nx">Controller</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">targets</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">form</span><span class="dl">"</span><span class="p">]</span> <span class="c1">// required to track when user are clicling outside the form</span>

  <span class="c1">// hide modal</span>
  <span class="c1">// action: "chore-modal#hideModal"</span>
  <span class="nx">hideModal</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">src</span><span class="dl">"</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="c1">// hide modal on successful form submission</span>
  <span class="c1">// action: "turbo:submit-end-&gt;chore-modal#submitEnd"</span>
  <span class="nx">submitEnd</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">hideModal</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// hide modal when clicking ESC</span>
  <span class="c1">// action: "keyup@window-&gt;chore-modal#closeWithKeyboard"</span>
  <span class="nx">closeWithKeyboard</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">Escape</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">hideModal</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// hide modal when clicking outside of modal</span>
  <span class="c1">// action: "click@window-&gt;chore-modal#closeBackground"</span>
  <span class="nx">closeBackground</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">formTarget</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">))</span> <span class="p">{</span> <span class="c1">// check with user are clicking inside the form</span>
      <span class="k">return</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hideModal</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Novamente, vale ressaltar, os eventos são definidos dentro do html com o atributo
<code class="language-plaintext highlighter-rouge">data-action="..."</code>. No caso, eu usei os eventos <code class="language-plaintext highlighter-rouge">keyup@window</code> e <code class="language-plaintext highlighter-rouge">click@window</code>, vinculados ao
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model" target="_blank">objeto DOM</a>.
Você pode ler mais sobre esses eventos
<a href="https://www.w3.org/TR/DOM-Level-3-Events/#dom-event-architecture" target="_blank">aqui</a>.</p>

<p>Para esses novos métodos, em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2/app/views/chores/new.html.erb" target="_blank">app/views/chores/new.html.erb</a>,
incluí:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file app/views/chores/new.html.erb of blog-part-3.2 branch --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"modal"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">div</span> <span class="ss">data: </span><span class="p">{</span>
      <span class="ss">controller: </span><span class="s2">"chore-modal"</span><span class="p">,</span>
      <span class="c1"># add all other actions, separated with space, as the following</span>
      <span class="ss">action: </span><span class="s2">"turbo:submit-end-&gt;chore-modal#submitEnd keyup@window-&gt;chore-modal#closeWithKeyboard click@window-&gt;chore-modal#closeBackground"</span>
    <span class="p">},</span>
    <span class="ss">class: </span><span class="s2">"z-40 fixed flex justify-center inset-0 bg-gray-600 bg-opacity-50 h-screen w-screen"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">div</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">chore_modal_target: </span><span class="s2">"form"</span> <span class="p">},</span> <span class="c1"># add this data target</span>
      <span class="ss">class: </span><span class="s2">"flex flex-col p-4 m-12 rounded-md w-2/3 h-2/3 bg-slate-200 rounded-md hover:bg-slate-400 transition duration-600 ease-linear"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex justify-between"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div&gt;&lt;/div&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">button_tag</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">action: </span><span class="s2">"chore-modal#hideModal"</span> <span class="p">},</span> <span class="ss">type: </span><span class="s2">"button"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"flex-none w-8 h-8 text-slate-600 hover:text-black transition-all duration-600 ease-in-out"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
          <span class="nt">&lt;svg</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/2000/svg"</span> <span class="na">width=</span><span class="s">"32"</span> <span class="na">height=</span><span class="s">"32"</span> <span class="na">fill=</span><span class="s">"currentColor"</span> <span class="na">viewBox=</span><span class="s">"0 0 16 16"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;path</span> <span class="na">d=</span><span class="s">"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;/svg&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"form"</span><span class="p">,</span> <span class="ss">chore: </span><span class="vi">@chore</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Repare que uso também o atributo <code class="language-plaintext highlighter-rouge">&lt;div data-chore-modal-target="form" ...&gt;</code> em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2/app/views/chores/new.html.erb" target="_blank">app/views/chores/new.html.erb</a>,
isso corresponde a <a href="https://stimulus.hotwired.dev/reference/targets" target="_blank">uma funcionalidade</a>
do pacote Hotwire Stimulus que nos permite referenciar um elemento, ou seja, no caso para que o
método <code class="language-plaintext highlighter-rouge">ChoreModalController#closeBackground()</code> saiba quando o usuário clica fora do formulário no
<em>modal</em>, e é justamento por isso que defino o <em>target</em>, como é possível ver na linha
<code class="language-plaintext highlighter-rouge">static targets = ["form"]</code> em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2/app/javascript/controllers/chore_modal_controller.js" target="_blank">app/javascript/controllers/chore_modal_controller.js</a>,
acessível dentro de <code class="language-plaintext highlighter-rouge">ChoreModalController</code> com <code class="language-plaintext highlighter-rouge">this.formTarget</code>, ou seja, na forma
<code class="language-plaintext highlighter-rouge">this.&lt;target name&gt;Target</code>.</p>

<p>Tudo o que foi feito até aqui é o que corresponde a <em>branch</em>
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2">blog-part-3.2</a>.</p>

<h3 id="bonus-aplicando-o-modal-com-viewcomponent">Bonus: aplicando o modal com ViewComponent</h3>
<p>Até agora o <em>modal</em> está disponível apenas na <em>view</em>
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.2/app/views/chores/new.html.erb" target="_blank">app/views/chores/new.html.erb</a>,
logo teria que replicar o código para a <em>view</em> de edição, o que não é organizacionalmente correto.
Para fazer isso, ao invés de criar o clássico <a href="https://guides.rubyonrails.org/layouts_and_rendering.html#using-partials" target="_blank"><em>partial</em> do Rails</a>,
resolvi testar a gema <a href="https://viewcomponent.org/" target="_blank">ViewComponent</a> que,
resumindo grosseiramente, permite a “componentização” dinâmica de “pedaços de html”, conceito
introduzido pelo framework <a href="https://reactjs.org/" target="_blank">React</a>.</p>

<p>No
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.3/Gemfile" target="_blank">Gemfile</a>,
incluí:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s2">"view_component"</span>
</code></pre></div></div>

<p>E o instalei com:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bundle <span class="nb">install</span>
</code></pre></div></div>

<p>Depois gerei um novo componente com o comando:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails generate component ChoreModal title
      create  app/components/chore_modal_component.rb
      invoke  rspec
      create    spec/components/chore_modal_component_spec.rb
      invoke  erb
      create    app/components/chore_modal_component.html.erb
</code></pre></div></div>

<p>Como o comando acima, ViewComponent irá criar já com <code class="language-plaintext highlighter-rouge">initialize()</code> para a variável <code class="language-plaintext highlighter-rouge">title</code>, da qual
irei utilizar para nomear o <em>modal</em> quando for de inserção e quando for de edição. Além disso, como
utilizo Turbo Frame, preciso inserir também <code class="language-plaintext highlighter-rouge">include Turbo::FramesHelper</code> em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.3/app/components/chore_modal_component.rb" target="_blank">app/components/chore_modal_component.rb</a>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ChoreModalComponent</span> <span class="o">&lt;</span> <span class="no">ViewComponent</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">Turbo</span><span class="o">::</span><span class="no">FramesHelper</span> <span class="c1"># add this</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">title</span><span class="p">:)</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="n">title</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre></div></div>

<p>Então, eu basicamente passei todo código do <em>modal</em> para
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.3/app/components/chore_modal_component.html.erb" target="_blank">app/components/chore_modal_component.html.erb</a>:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file app/components/chore_modal_component.html.erb of blog-part-3.3 branch --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">turbo_frame_tag</span> <span class="s2">"modal"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">div</span> <span class="ss">data: </span><span class="p">{</span>
      <span class="ss">controller: </span><span class="s2">"chore-modal"</span><span class="p">,</span>
      <span class="ss">action: </span><span class="s2">"turbo:submit-end-&gt;chore-modal#submitEnd keyup@window-&gt;chore-modal#closeWithKeyboard click@window-&gt;chore-modal#closeBackground"</span>
    <span class="p">},</span>
    <span class="ss">class: </span><span class="s2">"z-40 fixed flex justify-center inset-0 bg-gray-600 bg-opacity-50 h-screen w-screen"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">tag</span><span class="p">.</span><span class="nf">div</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">chore_modal_target: </span><span class="s2">"form"</span> <span class="p">},</span>
      <span class="ss">class: </span><span class="s2">"flex flex-col p-4 m-12 rounded-md w-2/3 h-2/3 bg-slate-200 rounded-md hover:bg-slate-400 transition duration-600 ease-linear"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex justify-between"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"text-2xl font-semibold"</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">button_tag</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">action: </span><span class="s2">"chore-modal#hideModal"</span> <span class="p">},</span> <span class="ss">type: </span><span class="s2">"button"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"flex-none w-8 h-8 text-slate-600 hover:text-black transition-all duration-600 ease-in-out"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
          <span class="nt">&lt;svg</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/2000/svg"</span> <span class="na">width=</span><span class="s">"32"</span> <span class="na">height=</span><span class="s">"32"</span> <span class="na">fill=</span><span class="s">"currentColor"</span> <span class="na">viewBox=</span><span class="s">"0 0 16 16"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;path</span> <span class="na">d=</span><span class="s">"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;/svg&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">content</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>A linha com <code class="language-plaintext highlighter-rouge">&lt;%= content %&gt;</code> irá renderizar o conteúdo do bloco onde <code class="language-plaintext highlighter-rouge">ChoreModalComponent.new</code> for
chamado, ou seja, respectivamente para
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.3/app/views/chores/new.html.erb" target="_blank">app/views/chores/new.html.erb</a>,
e para
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.3/app/views/chores/edit.html.erb" target="_blank">app/views/chores/edit.html.erb</a>,
ficando assim, respectivamente:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file app/views/chores/new.html.erb of blog-part-3.3 branch --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="no">ChoreModalComponent</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">title: </span><span class="s2">"New Chore"</span><span class="p">)</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"form"</span><span class="p">,</span> <span class="ss">chore: </span><span class="vi">@chore</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

<span class="c">&lt;!-- file app/views/chores/edit.html.erb of blog-part-3.3 branch --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="no">ChoreModalComponent</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">title: </span><span class="s2">"Editing Chore"</span><span class="p">)</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"form"</span><span class="p">,</span> <span class="ss">chore: </span><span class="vi">@chore</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Feito essas inclusões, se você subir o servidor Rails com <code class="language-plaintext highlighter-rouge">bin/dev</code>, notará que a aparência não é a
de antes, algo como:
<img src="/assets/posts/bug-tailwind-viewcomponent.webp" alt="Bug Tailwind + ViewComponent" class="align-center" /></p>

<p><strong>Por quê?</strong> Acontece que preciso agora informar o Tailwind, para “olhar” também para os
arquivos presente na pasta <code class="language-plaintext highlighter-rouge">app/components/</code>. Sendo assim, em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.3/tailwind.config.js" target="_blank">tailwind.config.js</a>:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// file tailwind.config.js of blog-part-3.3 branch</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">mode</span><span class="p">:</span> <span class="dl">'</span><span class="s1">jit</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">content</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">'</span><span class="s1">./app/views/**/*.{erb,html}</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">./app/components/**/*.{erb,html}</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// add this</span>
    <span class="dl">'</span><span class="s1">./app/helpers/**/*.rb</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">./app/javascript/**/*.js</span><span class="dl">'</span>
  <span class="p">],</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Além disso, precisamos “linkar” a edição de um <em>chore</em>, para isso eu aproveitei o ícone de edição
que tínhamos incluído, mas que estava <em>dummy</em>. Em
<a href="https://github.com/callmarx/LearningHotwire/blob/blog-part-3.3/app/views/chores/_chore.html.erb" target="_blank">app/views/chores/_chore.html.erb</a>,
temos:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span>
  <span class="na">id=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="n">dom_id</span> <span class="n">chore</span> <span class="cp">%&gt;</span><span class="s">"</span>
  <span class="na">class=</span><span class="s">"p-3 my-3 bg-white shadow-lg group transition duration-700 ease-in-out transform hover:scale-125 hover:z-10 rounded-md"</span>
<span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex flex-col"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex justify-between"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"text-lg font-bold leading-snug text-gray-900 mr-0.5"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">chore</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;time</span>
        <span class="na">datetime=</span><span class="cp">&lt;%=</span> <span class="n">chore</span><span class="p">.</span><span class="nf">created_at</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%Y-%m-%d"</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="err">
        </span><span class="s">class="invisible</span> <span class="na">text-sm</span> <span class="na">text-indigo-700</span> <span class="na">group-hover:visible</span><span class="err">"</span>
      <span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">chore</span><span class="p">.</span><span class="nf">created_at</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%b %d"</span><span class="p">)</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/time&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"leading-snug text-gray-900"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">chore</span><span class="p">.</span><span class="nf">content</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"flex justify-end space-x-2"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- replace the dummy button as following --&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">button_to</span> <span class="n">edit_chore_path</span><span class="p">(</span><span class="n">chore</span><span class="p">),</span> <span class="ss">method: :get</span><span class="p">,</span> <span class="ss">data: </span><span class="p">{</span> <span class="ss">turbo_frame: </span><span class="s1">'modal'</span> <span class="p">},</span> <span class="k">class</span><span class="ss">:"invisible w-5 h-5 text-indigo-500 cursor-pointer group-hover:visible hover:text-black transition-all duration-600 ease-in-out"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;svg</span> <span class="na">stroke=</span><span class="s">"currentColor"</span> <span class="na">fill=</span><span class="s">"none"</span> <span class="na">stroke-width=</span><span class="s">"1.7"</span> <span class="na">viewBox=</span><span class="s">"0 0 24 24"</span> <span class="na">stroke-linecap=</span><span class="s">"round"</span> <span class="na">stroke-linejoin=</span><span class="s">"round"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">d=</span><span class="s">"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">d=</span><span class="s">"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/svg&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">button_to</span> <span class="n">chore_path</span><span class="p">(</span><span class="n">chore</span><span class="p">),</span> <span class="ss">method: :delete</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"invisible w-5 h-5 text-indigo-500 cursor-pointer group-hover:visible hover:text-black transition-all duration-600 ease-in-out"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;svg</span> <span class="na">stroke=</span><span class="s">"currentColor"</span> <span class="na">fill=</span><span class="s">"currentColor"</span> <span class="na">stroke-width=</span><span class="s">"0"</span> <span class="na">viewBox=</span><span class="s">"0 0 16 16"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;path</span> <span class="na">d=</span><span class="s">"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"</span><span class="nt">&gt;&lt;/path&gt;&lt;path</span> <span class="na">fill-rule=</span><span class="s">"evenodd"</span> <span class="na">d=</span><span class="s">"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/svg&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>Pronto!</p>

<p>Minha vontade, como venho escrevendo, era fazer uma aplicação estilo Kanban. No final das contas
ficou apenas um quadro com tarefas/anotações dispostas sem qualquer ordem. Seria legal ter colunas
de estados, algo como o clássico <em>to do</em>, <em>doing</em>, <em>testing</em> e <em>done</em>; usuários com autenticação e
algum grau de hierarquia. Enfim, também não implementei nenhum teste, apesar de ter deixado
instalado e configurado o RSpec. Quem sabe eu faço isso no futuro, não sei ainda.</p>

<p>Por agora, é isso.</p>

<div class="tenor-gif-embed" data-postid="24697418" data-share-method="host" data-aspect-ratio="1" data-width="100%">
  <a href="https://tenor.com/view/baby-yoda-love-cute-gif-24697418"></a>
  <a href="https://tenor.com/search/baby-gifs">Baby GIFs</a>
</div>
<script type="text/javascript" async="" src="https://tenor.com/embed.js"></script>


        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#hotwire" class="page__taxonomy-item" rel="tag">Hotwire</a><span class="sep">, </span>
    
      <a href="/tags/#rails" class="page__taxonomy-item" rel="tag">Rails</a><span class="sep">, </span>
    
      <a href="/tags/#ruby" class="page__taxonomy-item" rel="tag">Ruby</a><span class="sep">, </span>
    
      <a href="/tags/#tailwind" class="page__taxonomy-item" rel="tag">Tailwind</a><span class="sep">, </span>
    
      <a href="/tags/#tutorial" class="page__taxonomy-item" rel="tag">Tutorial</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categorias: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#blog" class="page__taxonomy-item" rel="tag">blog</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Atualizado em:</strong> <time datetime="2022-06-29T21:34:03-03:00">2022-06-29</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Compartilhe</h4>
  

  <a href="https://twitter.com/intent/tweet?via=leminski_se&text=Tutorial%3A+Rails7%2C+Tailwind+e+Hotwire+-+Parte+3%20https%3A%2F%2Fcallmarx.github.io%2Fblog%2F2022%2F06%2F29%2Ftutorial-rails7-hotwire-parte-3.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Compartilhe Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fcallmarx.github.io%2Fblog%2F2022%2F06%2F29%2Ftutorial-rails7-hotwire-parte-3.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Compartilhe Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fcallmarx.github.io%2Fblog%2F2022%2F06%2F29%2Ftutorial-rails7-hotwire-parte-3.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Compartilhe LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/blog/2022/06/08/dotfiles.html" class="pagination--pager" title="Hoje eu aprendi: Vale a pena configurar seus dotfiles
">Anterior</a>
    
    
      <a href="#" class="pagination--pager disabled">Próxima</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">Talvez você também goste</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2022/06/08/dotfiles.html" rel="permalink">Hoje eu aprendi: Vale a pena configurar seus dotfiles
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-06-08T16:58:19-03:00">2022-06-08</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          5 minuto(s) de leitura
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">

Depois de mais de 3 anos usando Vim como IDE (Integrated Development Environment), migrando no
caminho para o Neovim com o shell zsh, o gerenciador
Oh My Zsh e o tema
Powerlevel10k, percebi como eu
dependia dessas configurações e como ...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2021/12/19/tutorial-rails7-hotwire-parte-2.html" rel="permalink">Tutorial: Rails7, Tailwind e Hotwire - Parte 2
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-12-19T14:42:03-03:00">2021-12-19</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          17 minuto(s) de leitura
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">

Na parte anterior
deste tutorial eu expliquei como customizar e utilizar o Tailwind sem uma linha sequer de CSS e
JavaScript. Agora vou abordar um pouco sobre o pacote
Hotwire Turbo.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2021/12/09/tutorial-rails7-hotwire-parte-1.html" rel="permalink">Tutorial: Rails7, Tailwind e Hotwire - Parte 1
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-12-09T11:12:54-03:00">2021-12-09</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          18 minuto(s) de leitura
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">

Na parte anterior deste
tutorial, expliquei como configurar o Rails 7, com suas novas opções e como “dockerizei” os bancos
de dados PostgreSQL e Redis. Agora vou abordar um pouco sobre Tailwind.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2021/12/07/tutorial-rails7-hotwire.html" rel="permalink">Tutorial: Rails7, Tailwind e Hotwire
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-12-07T17:48:12-03:00">2021-12-07</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minuto(s) de leitura
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">


Depois de meses desenvolvendo em Typescript com NestJS
por demanda do meu atual trabalho, consegui um tempinho para meu tão amado Ruby on Rails. Melhor
ainda agora, como não trabalho oficialmente com Rails, posso me dar o luxo de me a...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Pesquisar..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      
        
          <li><a href="https://github.com/callmarx" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/eugenio-augusto-jimenes/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 CallMarx. Desenvolvido com o <a href=/code-of-conduct/><b>Código de Conduta</b></a> para comunidade de código aberto, sob a licença <a href=/mit-license/><b>MIT</b></a>, framework <a href="https://jekyllrb.com" rel="nofollow"><b>Jekyll</b></a> e tema <a href="https://github.com/mmistakes/minimal-mistakes" rel="nofollow"><b>Minimal Mistakes</b></a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
